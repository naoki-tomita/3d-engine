(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))h(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&h(r)}).observe(document,{childList:!0,subtree:!0});function s(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function h(o){if(o.ep)return;o.ep=!0;const n=s(o);fetch(o.href,n)}})();class g{constructor(e,s){this.position=e,this.lookAt=s}project(e){const s=500/(e.z||1e-6);return new P(s*e.x,s*e.y)}transformVector(e,s){const h=s.x,o=s.y,n=s.z,r=1,t=[];for(let x=0;x<4;x++){const f=e[0][x],m=e[1][x],p=e[2][x],v=e[3][x],k=h*f+o*m+n*p+r*v;t.push(k)}return new i(t[0]/t[3],t[1]/t[3],t[2]/t[3])}convertPosition(e){const s=this.lookAt.subtract(this.position).toNormalizedVector(),h=new z(0,1,0),o=s.cross(h).normalize(),n=o.cross(s),r=[[o.x,n.x,s.x,0],[o.y,n.y,s.y,0],[o.z,n.z,s.z,0],[0,0,0,1]];return this.transformVector(r,this.position.subtract(e))}}class w{constructor(e,s,h,o){this.v1=e,this.v2=s,this.v3=h,this.color=o}get normalVector(){const e=this.v2.subtract(this.v1).toVector(),s=this.v3.subtract(this.v2).toVector();return e.cross(s).normalize()}get center(){return new i((this.v1.x+this.v2.x+this.v3.x)/3,(this.v1.y+this.v2.y+this.v3.y)/3,(this.v1.z+this.v2.z+this.v3.z)/3)}}class A{constructor(e){this.faces=e}get vertices(){return this.faces.map(e=>[e.v1,e.v2,e.v3]).flat()}}class b{constructor(){const e=document.querySelector("canvas");this.context=e.getContext("2d"),this.width=e.width,this.height=e.height}clear(){this.context.clearRect(0,0,this.width,this.height)}draw(e,s,h,o){const n=this.width/2,r=this.height/2;this.context.beginPath(),this.context.moveTo(e.x+n,-e.y+r),this.context.lineTo(s.x+n,-s.y+r),this.context.lineTo(h.x+n,-h.y+r),this.context.closePath(),this.context.strokeStyle="black",this.context.stroke(),this.context.fillStyle=o.value,this.context.fill()}}class i{constructor(e,s,h){this.x=e,this.y=s,this.z=h}subtract(e){return new i(this.x-e.x,this.y-e.y,this.z-e.z)}add(e){return new i(this.x+e.x,this.y+e.y,this.z+e.z)}toNormalizedVector(){return this.toVector().normalize()}toVector(){return new z(this.x,this.y,this.z)}}class P{constructor(e,s){this.x=e,this.y=s}}class z{constructor(e,s,h){this.x=e,this.y=s,this.z=h}get norm(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)+Math.pow(this.z,2))}normalize(e=1){const s=this.norm;return new z(this.x&&this.x/s*e,this.y&&this.y/s*e,this.z&&this.z/s*e)}cross(e){return new z(this.y*e.z-this.z*e.y,this.z*e.x-this.x*e.z,this.x*e.y-this.y*e.x)}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}toVertex3D(){return new i(this.x,this.y,this.z)}angle(e){return this.dot(e)/(this.norm*e.norm)}}const y=class{constructor(a,e,s,h=1){this.a=h,this.r=Math.floor(a),this.g=Math.floor(e),this.b=Math.floor(s)}darken(a=1){return new y(Math.floor(this.r*a),Math.floor(this.g*a),Math.floor(this.b*a),this.a)}get value(){return`rgba(${this.r},${this.g},${this.b},${this.a})`}};let l=y;l.Red=new y(255,0,0);l.Green=new y(0,255,0);l.Blue=new y(0,0,255);l.Yellow=new y(255,255,0);l.Pink=new y(255,20,147);l.Orange=new y(255,99,71);l.Cyan=new y(0,255,255);l.Purple=new y(255,0,255);class M{constructor(e,s,h){this.view=e,this.camera=s,this.objects=h}render(){const e=this.objects.map(s=>s.faces.map(h=>new w(this.camera.convertPosition(h.v1),this.camera.convertPosition(h.v2),this.camera.convertPosition(h.v3),h.color))).flat();this.view.clear(),e.sort((s,h)=>s.center.z-h.center.z).filter(s=>s.v1.z<0&&s.v2.z<0&&s.v3.z<0).filter(s=>s.center.toVector().angle(s.normalVector)<=0).forEach(s=>{this.view.draw(this.camera.project(s.v1),this.camera.project(s.v2),this.camera.project(s.v3),s.color)})}}function u(a,e,s,h){const o=h/2,n=h/2,r=h/2,t={x:a,y:e,z:s},x=[new w(new i(t.x-o,t.y-n,t.z-r),new i(t.x+o,t.y-n,t.z-r),new i(t.x-o,t.y-n,t.z+r),l.Red),new w(new i(t.x+o,t.y-n,t.z-r),new i(t.x+o,t.y-n,t.z+r),new i(t.x-o,t.y-n,t.z+r),l.Red),new w(new i(t.x-o,t.y-n,t.z+r),new i(t.x+o,t.y-n,t.z+r),new i(t.x-o,t.y+n,t.z+r),l.Blue),new w(new i(t.x-o,t.y+n,t.z+r),new i(t.x+o,t.y-n,t.z+r),new i(t.x+o,t.y+n,t.z+r),l.Blue),new w(new i(t.x+o,t.y-n,t.z-r),new i(t.x+o,t.y+n,t.z-r),new i(t.x+o,t.y-n,t.z+r),l.Green),new w(new i(t.x+o,t.y+n,t.z-r),new i(t.x+o,t.y+n,t.z+r),new i(t.x+o,t.y-n,t.z+r),l.Green),new w(new i(t.x-o,t.y+n,t.z-r),new i(t.x-o,t.y+n,t.z+r),new i(t.x+o,t.y+n,t.z-r),l.Orange),new w(new i(t.x+o,t.y+n,t.z-r),new i(t.x-o,t.y+n,t.z+r),new i(t.x+o,t.y+n,t.z+r),l.Orange),new w(new i(t.x-o,t.y-n,t.z-r),new i(t.x-o,t.y-n,t.z+r),new i(t.x-o,t.y+n,t.z+r),l.Pink),new w(new i(t.x-o,t.y-n,t.z-r),new i(t.x-o,t.y+n,t.z+r),new i(t.x-o,t.y+n,t.z-r),l.Pink),new w(new i(t.x-o,t.y-n,t.z-r),new i(t.x-o,t.y+n,t.z-r),new i(t.x+o,t.y-n,t.z-r),l.Yellow),new w(new i(t.x+o,t.y-n,t.z-r),new i(t.x-o,t.y+n,t.z-r),new i(t.x+o,t.y+n,t.z-r),l.Yellow)];return new A(x)}const c=new g(new i(1.3,1.3,1.3),new i(1,1,2)),V=u(1,1,2,.1),O=u(1,1,4,.5),j=new b,C=new M(j,c,[V,O]);function d(){C.render(),requestAnimationFrame(d)}requestAnimationFrame(d);window.addEventListener("keydown",a=>{a.key==="ArrowUp"&&(c.lookAt.z=c.lookAt.z+.1,c.position.z=c.position.z+.1),a.key==="ArrowDown"&&(c.lookAt.z=c.lookAt.z-.1,c.position.z=c.position.z-.1),a.key==="ArrowLeft"&&(c.lookAt.x=c.lookAt.x+.1,c.position.x=c.position.x+.1),a.key==="ArrowRight"&&(c.lookAt.x=c.lookAt.x-.1,c.position.x=c.position.x-.1),a.key===" "&&(c.lookAt.y=c.lookAt.y+.1,c.position.y=c.position.y+.1),a.key==="Control"&&(c.lookAt.y=c.lookAt.y-.1,c.position.y=c.position.y-.1),a.key==="w"&&(c.lookAt.z=c.lookAt.z+.1),a.key==="s"&&(c.lookAt.z=c.lookAt.z-.1),a.key==="a"&&(c.lookAt.x=c.lookAt.x+.1),a.key==="d"&&(c.lookAt.x=c.lookAt.x-.1)});
